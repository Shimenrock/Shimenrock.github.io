---
title: "Mysql 索引"
permalink: /dba/mysql-index/
excerpt: "Mysql 索引"
last_modified_at: 2020-02-10T21:36:11-04:00
categories: mysql
redirect_from:
  - /theme-setup/
toc: true
---
<!-- 
重学MySQL打卡行动Day22！

学习内容 : 普通索引与唯一索引
对应篇目：
09 | 普通索引和唯一索引，应该怎么选择？http://gk.link/a/101sI

普通索引和唯一索引，在查询能力上是没差别的，主要考虑的是对更新性能的影响。由于唯一索引用不上change buffer的优化机制，因此如果业务可以接受，从性能角度出发建议你优先考虑普通索引。

今天这篇文章，会分析数据的查询和更新过程、change buffer 的机制以及应用场景，和你讲明白索引选择的实践。"
-->

# 1.普通索引和唯一索引

## 1.1.索引选择

```
select name from CUser where id_card = 'xxxxxxxyyyyyyzzzzz';
```

由于id_card字段比较大，不建议做主键，那么有两个选择
- id_card创建唯一索引
- id_card创建普通索引

```
select id from T where k=5;
```

### 查询过程
- 普通索引，查到第一个满足条件记录后，需要向后继续查找记录。
- 唯一索引，查找第一个记录后，停止继续检索。

两者性能无差别，因为都在一个数据页里。

### 更新过程


重学MySQL打卡行动Day23！

学习内容 : 如何选择索引
对应篇目：
10 | MySQL为什么有时候会选错索引？http://gk.link/a/101u1

今天这篇文章，丁奇会和你分析MySQL选错索引的两种情况：

1.因为索引统计信息不准确导致的问题，你可以用analyze table来解决。
2.对于优化器误判的情况，你可以在应用端用force index来强行指定索引，也可以通过修改语句来引导优化器，还可以通过增加或者删除索引来绕过这个问题。

️学习完这部分之后请在小程序上记录学习笔记或者感悟，视为当日打卡成功，一周打卡≥3次即可获得阶段性奖励。

现在可以开始 Day23 打卡了，好的开始就是成功的一半，大家加油哦！

重学MySQL打卡行动 Day24！

学习内容 : 给字符串加索引
对应篇目：
11 | 怎么给字符串字段加索引？http://gk.link/a/101vB

今天这篇文章，丁奇会和你分析给字符串加索引的四种方式：
1. 直接创建完整索引；
2. 创建前缀索引；
3. 倒序存储，再创建前缀索引；
4. 创建hash字段索引。

️学习完这部分之后请在小程序上记录学习笔记或者感悟，视为当日打卡成功，一周打卡≥3次即可获得阶段性奖励。

现在可以开始 Day24 打卡了，好的开始就是成功的一半，大家加油哦！


重学 MySQL 打卡行动 Day25！

学习内容 : InnoDB脏页的控制策略 
对应篇目：
12 | 为什么我的MySQL会“抖”一下？http://gk.link/a/101xr

一条 SQL 语句，正常执行时特别快，但是有时也不知道怎么回事，它会变得特别慢，并且这样的场景很难复现，它不只随机，而且持续时间还很短。看上去，就像是数据库“抖”了一下。

今天，丁奇就和你说说这是怎么回事。

️学习完这部分之后请在小程序上记录学习笔记或者感悟，视为当日打卡成功，一周打卡≥3次即可获得阶段性奖励。

现在可以开始 Day25 打卡了，好的开始就是成功的一半，大家加油哦！


重学MySQL打卡行动Day26！

学习内容：日志和索引常见问题

对应篇目：
15 | 答疑文章（一）：日志和索引相关问题 http://gk.link/a/101D8

今天，丁奇会与你分析几个与日志和索引相关的问题，比如“在两阶段提交的不同瞬间，MySQL 如果发生异常重启，如何保证数据完整性？”“如果业务根本无法保证不会插入重复数据，且数据库一定要有唯一性约束，设计时采用唯一索引还是普通索引？”。

️学习完这部分之后请在小程序上记录学习笔记或者感悟，视为当日打卡成功，一周打卡≥3次即可获得阶段性奖励。

现在可以开始 Day26 打卡了，好的开始就是成功的一半，大家加油哦！